<%#
# Navigation
This partial is used to display the navigation in Administrate.
By default, the navigation contains navigation links
for all resources in the admin dashboard,
as defined by the routes in the `admin/` namespace
%>

<header class="header--main test">
  <h1><%= link_to current_community.name, admin_root_path %></h1>

  <nav class="navigation" role="navigation">
    <ul>
      <% excluded_resources = ['curriculum_stories'] %>

      <% Administrate::Namespace.new(namespace).resources_with_index_route.each do |resource| %>
        <% unless excluded_resources.include?(resource) %>
          <% if valid_action?(:index, resource) && show_action?(:index, model_from_resource(resource)) %>
            <li>
              <%= link_to(
                t("administrate.#{resource.pluralize}"),
                resource_index_route(resource),
              ) %>
          </li>
          <% end %>
        <% end %>
      <% end %>
      <li>
        <a href="javascript:void(0);"><%= current_user.email %> <i class="fa fa-caret-down"></i></a>
        <ul class="dropdown" aria-label="submenu">
          <li><%= link_to t("profile"), admin_user_path(current_user) %></a>
          <li><%= link_to t("logout"), destroy_user_session_path, method: :delete  %></li>
        </ul>
      </li>
      <li class="navigation__last-menu-item">
        <%= link_to(t("administrate.navigation.back_to_app"), home_map_path(locale: params[:locale])) if defined?(root_url) %>
      </li>
    </ul>
  </nav>
</header>
